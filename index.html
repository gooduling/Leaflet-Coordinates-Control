<!DOCTYPE html>
<html>
<head>
	<title>Leaflet Picker</title>
	<meta charset="utf-8" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
<link rel="stylesheet" href="Control.Coordinates.css" />
 <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
 <script src='https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js'></script>
</head>
<body>
<iframe id="googleform" src="https://docs.google.com/forms/d/e/1FAIpQLSe5hhaRR_Nb_Nz6_PmglYwA_hna2CTeTxq9ZuNGmxBFsT0_EA/viewform?embedded=true" height="450" frameborder="0" marginheight="0" marginwidth="0">Loading...</iframe>
<h3 style="width: 700px">Отримати координати:</h3>
	<div id="map" class="in-group"></div>
	<iframe id="googleform" src="https://docs.google.com/forms/d/e/1FAIpQLSe5hhaRR_Nb_Nz6_PmglYwA_hna2CTeTxq9ZuNGmxBFsT0_EA/viewform?embedded=true" height="450" frameborder="0" marginheight="0" marginwidth="0">Loading...</iframe>
	
	<script src="Control.Coordinates.js"></script>
	<script>
	var publicSpreadsheetUrl = 'https://docs.google.com/spreadsheets/d/1I9-8tqq5CsLOTycXU4Y84CQw47fDsUEIPMxRNt7Te9U/pubhtml';

	  function init() {
	    Tabletop.init( { key: publicSpreadsheetUrl,
	                     callback: showInfo,
	                     simpleSheet: true } )
	  }

	  function showInfo(data, tabletop) {
	    alert('Successfully processed!')
	    console.log(data);
	  }

	  window.addEventListener('DOMContentLoaded', init);
	var companies = {
		Ciklum: [50.422338, 30.505977],
		Ciklum2: [50.438579, 30.523105],
		Epam: [50.431323, 30.487461],
		Luxsoft: [50.450266, 30.410349],
		DataArt: [50.459355, 30.496512],
		SoftServe: [50.462448, 30.449534],
		Infopulse: [50.444715, 30.450561],
		GlobalLogic: [50.424638, 30.506538],
		Netcracker: [50.420402, 30.528942],
		Miratech: [50.447575, 30.422399],
		Innovecs: [50.446572, 30.423697],
		EVO: [50.404759, 30.680041]
	};
	var map = L.map('map', {
		center: [50.44, 30.52],
		scrollWheelZoom: false,
		zoom: 11
	});
	map.on('focus', function() { map.scrollWheelZoom.enable(); });
	map.on('blur', function() { map.scrollWheelZoom.disable(); });
	
<!-- http://a.tile.openstreetmap.fr/hot/ -->
		L.tileLayer('https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png', {
			maxZoom: 18,
			attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
		}).addTo(map);

		
Object.keys(companies).forEach(function(key, i) {
	var coord = companies[key];
	var icon = L.divIcon({className: 'comp-label'});
	var mark = L.marker(coord, {icon: icon}).addTo(map);
	mark.bindTooltip(key, {permanent: true});
})
		var c = new L.Control.Coordinates();
		c.addTo(map);

		function onMapClick(e) {	
			c.setCoordinates(e);
		}
		function onMapHover(e) {
			c.bindCircle(e);
		}

		map.on('click', onMapClick);
		map.on('mousemove', onMapHover);

	</script>
</body>
</html>
